"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof2=require("babel-runtime/helpers/typeof"),_typeof3=_interopRequireDefault(_typeof2),_getIterator2=require("babel-runtime/core-js/get-iterator"),_getIterator3=_interopRequireDefault(_getIterator2),_keys=require("babel-runtime/core-js/object/keys"),_keys2=_interopRequireDefault(_keys);exports.table=table,exports.where=where,exports.join=join,exports.field=field,exports.alias=alias,exports.data=data,exports.order=order,exports.limit=limit,exports.page=page,exports.group=group,exports.having=having,exports.union=union,exports.distinct=distinct,exports.lock=lock,exports.comment=comment,exports.count=count,exports.max=max,exports.min=min,exports.avg=avg,exports.sum=sum;var _util=require("./util");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function table(t){if("string"==typeof t)(t=t&&-1!=t.indexOf("SELECT")?"("+t+")":t)&&(this.sqlObj.table=t);else{var e=(0,_keys2.default)(t),r=[],i=!0,n=!1,o=void 0;try{for(var s,u=(0,_getIterator3.default)(e);!(i=(s=u.next()).done);i=!0){var l=s.value;r.push(l+" AS "+t[l])}}catch(t){n=!0,o=t}finally{try{!i&&u.return&&u.return()}finally{if(n)throw o}}this.sqlObj.table=r.join(", ")}return this}function where(t){var e="";return(e="string"==typeof t?t:(0,_util.getOptToString)(t))&&(this.sqlObj.where=e),this}function join(t){var e="";switch(Object.prototype.toString.call(t)){case"[object Array]":for(var r=0,i=t.length;r<i;r++)t[r].dir&&t[r].table&&t[r].where&&(e+=" "+t[r].dir.toUpperCase()+" JOIN "+(0,_util.sortSelectSql)(t[r].table,!0).result+" ON ("+(0,_util.getOptToString)(t[r].where)+")");break;case"[object Object]":if(!t.dir||!t.table||!t.where)return;e+=" "+t.dir.toUpperCase()+" JOIN "+(0,_util.sortSelectSql)(t.table,!0).result+" ON ("+(0,_util.getOptToString)(t.where)+")"}return e&&(this.sqlObj.join=e),this}function field(t){if("object"===(void 0===t?"undefined":(0,_typeof3.default)(t))){var e=[],r=!0,i=!1,n=void 0;try{for(var o,s=(0,_getIterator3.default)(t);!(r=(o=s.next()).done);r=!0){var u=o.value;if("string"==typeof u)e.push(u);else{var l=(0,_keys2.default)(u),a=!0,h=!1,f=void 0;try{for(var p,c=(0,_getIterator3.default)(l);!(a=(p=c.next()).done);a=!0){var O=p.value;e.push(O+" AS "+u[O])}}catch(t){h=!0,f=t}finally{try{!a&&c.return&&c.return()}finally{if(h)throw f}}}}}catch(t){i=!0,n=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw n}}t=e.join(", ")}return this.sqlObj.field=t,this}function alias(t){return this.sqlObj.alias=t,this}function data(t){var e={};return"string"==typeof t?t.split("&").forEach(function(t){t=t.split("=");e[t[0]]=t[1]}):e=t,this.sqlObj.data=e,this}function order(t){return"object"===(void 0===t?"undefined":(0,_typeof3.default)(t))&&(t=t.join(",")),this.sqlObj.order="ORDER BY "+t,this}function limit(){return this.sqlObj.limit="LIMIT "+Array.prototype.slice.apply(arguments),this}function page(t){var e=[];return 2==(e=1===arguments.length?t.split(","):Array.prototype.slice.apply(arguments)).length&&(t=parseInt(e[0]-1)*parseInt(e[1]),e=parseInt(e[1]),this.sqlObj.limit="LIMIT "+t+","+e),this}function group(t){return this.sqlObj.group="GROUP BY "+t,this}function having(t){return this.sqlObj.having="HAVING "+t,this}function union(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return"string"==typeof t?this.sqlObj.union?this.sqlObj.union=this.sqlObj.union+" ("+t+") "+(e?"UNION ALL":"UNION"):this.sqlObj.union="("+t+") "+(e?"UNION ALL":"UNION")+" ":"object"===(void 0===t?"undefined":(0,_typeof3.default)(t))&&(this.sqlObj.union?this.sqlObj.union=this.sqlObj.union+" ("+t.join(e?") UNION ALL (":") UNION (")+")  "+(e?"UNION ALL":"UNION")+" ":this.sqlObj.union="("+t.join(e?") UNION ALL (":") UNION (")+") "+(e?"UNION ALL":"UNION")+" "),this}function distinct(t){return t&&(this.sqlObj.distinct="DISTINCT"),this}function lock(t){return t&&(this.sqlObj.lock="FOR UPDATE"),this}function comment(t){return t&&(this.sqlObj.comment="/* "+t+" */"),this}function count(t,e){return this.sqlObj.count="COUNT("+(t||1)+")"+(e?" AS "+e:""),this}function max(t,e){return t&&(this.sqlObj.max="MAX("+t+")"+(e?" AS "+e:"")),this}function min(t,e){return t&&(this.sqlObj.min="MIN("+t+")"+(e?" AS "+e:"")),this}function avg(t,e){return t&&(this.sqlObj.avg="AVG("+t+")"+(e?" AS "+e:"")),this}function sum(t,e){return t&&(this.sqlObj.sum="SUM("+t+")"+(e?" AS "+e:"")),this}